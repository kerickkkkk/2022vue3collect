import{u as w,h as C,i as j,r,j as B,o as n,c as l,b as t,F as f,k as P,l as S,m as b,t as i,e as V}from"./index-1c637fa1.js";import{a as m}from"./axios-86558b18.js";import{_ as N}from"./PaginationComponent-a713c059.js";const D={class:"container"},F=t("h3",{class:"text-center my-4"},"產品",-1),L={class:"row"},T={class:"card h-100"},U=["src"],E={class:"card-body"},G={class:"d-flex justify-content-between"},M={class:"card-title"},R={class:"badge rounded-pill bg-secondary h5"},q={class:"d-flex justify-content-between"},z={key:0,class:"h5 ms-auto"},A={class:"text-danger h5 ms-auto"},H={class:"d-flex justify-content-center"},I=["onClick"],J=["onClick"],K={key:0,class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},Y={__name:"ProductsView",setup(O){const y=w(),k=C(),{setLoading:c}=k,u=j("$swal"),_="https://vue3-course-api.hexschool.io/v2",p="vue3",h=r(""),g=r([]),o=r(null),v=(a=1)=>{var e;if(a===((e=o.value)==null?void 0:e.current_page))return!1;c(!0),m.get(`${_}/api/${p}/products?page=${a}`).then(({data:s})=>{c(!1),g.value=s.products,o.value=s.pagination}).catch(s=>{var d;c(!1),console.dir(s),u((d=s==null?void 0:s.response)==null?void 0:d.data)})},x=a=>{c(!0),m.get(`${_}/api/${p}/product/${a}`).then(({data:e})=>{e.success&&y.push({name:"product",params:{id:a}}),c(!1)}).catch(e=>{var s;c(!1),console.dir(e),u((s=e==null?void 0:e.response)==null?void 0:s.data)})},$=a=>{h.value=a};return B(()=>{v()}),(a,e)=>(n(),l("div",D,[F,t("div",L,[(n(!0),l(f,null,P(g.value,s=>(n(),l("div",{class:"col-md-4 mb-3",key:s.id},[t("div",T,[t("img",{src:s.imageUrl,class:"card-img-top",alt:"圖片"},null,8,U),t("div",E,[t("div",G,[t("h5",M,i(s.title),1),t("div",null,[t("div",R,i(s.category),1)])]),t("div",q,[s.origin_price===s.price?(n(),l("span",z,"$"+i(s.origin_price),1)):(n(),l(f,{key:1},[t("del",null,"$"+i(s.origin_price),1),t("span",A,"$"+i(s.price),1)],64))]),t("div",H,[t("button",{onClick:d=>x(s.id),class:"btn btn-outline-primary me-3",type:"button"}," 看詳細 ",8,I),t("button",{onClick:d=>$(s.id),class:"btn btn-danger",type:"button"},[h.value===s.id?(n(),l("span",K)):b("",!0),V(" 加入購物車 ")],8,J)])])])]))),128))]),o.value?(n(),S(N,{key:0,current_page:o.value.current_page,total_pages:o.value.total_pages,has_next:o.value.has_next,has_pre:o.value.has_pre,onGetPage:v},null,8,["current_page","total_pages","has_next","has_pre"])):b("",!0)]))}};export{Y as default};
